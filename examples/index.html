<html>
<head>
	<title>3d playground</title>

	<script src="http://cdn.alloyui.com/2.0.x/aui/aui-min.js"></script>
	<link href="http://cdn.alloyui.com/2.0.x/aui-css/css/bootstrap.css" rel="stylesheet">
	<script src="../build/y3d/y3d.js"></script>

	<style type="text/css">
		.toolbar {
			position: absolute;
			top: 10px;
			right: 30px;
		}

		.span6 {
			padding: 0 !important;
			margin: 0 !important;
			width: 50% !important;
		}

		#y3d {
			height: 100%;
			width: 100%;
		}

		.row {
			margin-left: 0 !important;
		}

		.container-fluid {
			padding-right: 0 !important;
			padding-left: 0 !important;
		}

		#wrapper {
			position: relative;
		}
	</style>
</head>
<body>
	<div class="container-fluid">
		<div class="row row-fluid">
			<div id="wrapper" class="span6">
				<canvas id='y3d'></canvas>
				<button id="runButton" class="btn-primary"></button>
			</div>
			<div class="span6">
				<div id="editorContainer"><div id="editor"></div></div>
			</div>
		</div>
	</div>


	<script id="source" type="y3d-script">YUI().use('y3d-camera', 'dom', 'y3d-geometry-box', 'y3d-scene', function(Y) {
	var scene = new Y.Scene({
		camera: new Y.Camera({
			z: 20
		}),

		clearColor: '#272822'
	});

	var box = new Y.Box({
		color: '#ff7700'
	});

	box.rotate('xy', 45);

	scene.add(box);

	scene.render();
});</script>

	<script>
		YUI().use('aui-ace-editor', 'aui-button', 'aui-toolbar', 'event-resize', 'event-key', 'node', function(Y) {
			var editor = new Y.AceEditor({
				boundingBox: '#editor',
				mode: 'javascript',
				showPrintMargin: false,
				value: Y.Node.one('#source').get('text')
			});

			editor.getEditor().setTheme("ace/theme/monokai");

			var run = function() {
				eval(editor.get('value'));
			};

			var tool = new Y.Toolbar({
				children: [
					[
						{
							label: 'Run',
							on: {
								'click': run
							},
							primary: true,
							srcNode: '#runButton'
						}
					],
					[
						{
							label: 'Reset'
						}
					]
				]
			}).render('#wrapper');

			var syncSize = function() {
				var width = Y.DOM.winWidth()/2,
					height = Y.DOM.winHeight(),
					canvas = Y.Node.one('#y3d');

				canvas.set('height', height);
				canvas.set('width', width);;

				editor.set('height', height);
				editor.set('width', width);

				run();
				editor.render();
			};

			syncSize();

			Y.on('windowresize', syncSize);
		});
	</script>
</body>
</html>