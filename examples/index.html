<html>
<head>
	<title>3d playground</title>

	<script src="http://cdn.alloyui.com/2.0.x/aui/aui-min.js"></script>
	<script src="../build/y3d/y3d.js"></script>

	<link href="http://cdn.alloyui.com/2.0.x/aui-css/css/bootstrap.css" rel="stylesheet">
	<link href="./css/playground.css" rel="stylesheet">
</head>
<body>
	<div class="container-fluid">
		<div class="row row-fluid">
			<div id="output" class="span6">
				<canvas id='y3d'></canvas>
				<button id="run" class="btn-primary"></button>
				<button id="reset" class="btn-danger"></button>
			</div>
			<div class="span6">
				<div id="editor"></div>
			</div>
		</div>
	</div>


	<script id="source" type="y3d-script">YUI().use('y3d-camera', 'dom', 'y3d-geometry-box', 'y3d-scene', function(Y) {
	var scene = new Y.Scene({
		camera: new Y.Camera({
			z: 20
		}),

		background: '#272822'
	});

	var box = new Y.Box({
		color: '#ff7700'
	});

	box.rotate('xy', 45);

	scene.add(box);

	scene.render();
});</script>

	<script>
		YUI().use('aui-ace-editor', 'aui-button', 'aui-toolbar', 'event-resize', 'event-key', 'node', function(Y) {
			var editor = new Y.AceEditor({
				boundingBox: '#editor',
				mode: 'javascript',
				showPrintMargin: false,
				value: Y.Node.one('#source').get('text')
			});

			editor.getEditor().setTheme("ace/theme/monokai");

			var run = function() {
				eval(editor.get('value'));
			};

			var reset = function() {
				editor.set('value', Y.Node.one('#source').get('text'));
			};

			var tool = new Y.Toolbar({
				children: [
					[{
						label: 'Run',
						on: {
							'click': run
						},
						primary: true,
						srcNode: '#run'
					}],
					[{
						label: 'Reset',
						on: {
							'click': reset
						},
						srcNode: '#reset'
					}]
				]
			}).render('#output');

			var syncSize = function() {
				var width = Y.DOM.winWidth()/2,
					height = Y.DOM.winHeight(),
					canvas = Y.Node.one('#y3d');

				canvas.set('height', height);
				canvas.set('width', width);;

				editor.set('height', height);
				editor.set('width', width);

				run();
				editor.render();
			};

			syncSize();

			Y.on('windowresize', syncSize);
		});
	</script>
</body>
</html>