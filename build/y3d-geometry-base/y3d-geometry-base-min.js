YUI.add("y3d-geometry-base",function(e,t){var n=e.Lang;e.Geometry=e.Base.create("geometry",e.Base,[],{initializer:function(){var e=this;e._updateMatrix(),e.after("positionChange",e._updateMatrix),e.after("rotationChange",e._updateMatrix)},_generateId:function(){return Math.floor(Math.random()*16777215).toString(16)},_setColor:function(t){var r=this,i=r.get("vertices").length/3,s=[],o;n.isArray(t)&&t.length===3?t.push(1):n.isString(t)&&(t=e.Color.normalizedColorArray(t));for(o=0;o<i;o++)s=s.concat(t);return s},_setPosition:function(t){var n=this,r=n.get("position");return r?e.merge(r,t):e.merge({x:0,y:0,z:0},t)},_setRotation:function(t){var n=this,r=n.get("rotation");return r?e.merge(r,t):e.merge({x:0,y:0,z:0},t)},_setTexture:function(t){return n.isString(t)&&(t=new e.Texture({imageUrl:t})),t},_setWireframe:function(e){var t=this,n=t.get("lines"),r=t.get("indices"),i;if(e&&n===null){n=[];for(i=0;i<r.length;i+=3)n.push(r[i]),n.push(r[i+1]),n.push(r[i+1]),n.push(r[i+2]),n.push(r[i+2]),n.push(r[i]);t.set("lines",n)}return e},_updateMatrix:function(){var t=this,n=e.WebGLMatrix.mat4.create(),r=t.get("position"),i=t.get("rotation");e.WebGLMatrix.mat4.identity(n),t.set("matrix",n),e.WebGLMatrix.mat4.translate(n,[r.x,r.y,r.z]),e.WebGLMatrix.mat4.rotateX(n,i.x*(Math.PI/180)),e.WebGLMatrix.mat4.rotateY(n,i.y*(Math.PI/180)),e.WebGLMatrix.mat4.rotateZ(n,i.z*(Math.PI/180))}},{ATTRS:{color:{value:"white",setter:"_setColor",validator:function(e){return n.isArray(e)||n.isString(e)}},id:{writeOnce:!0,valueFn:"_generateId"},indices:{value:[],validator:n.isArray},lines:{value:null,validator:n.isArray},matrix:{value:null},normals:{value:[],validator:n.isArray},position:{value:{x:0,y:0,z:0},setter:"_setPosition"},rotation:{value:{x:0,y:0,z:0},setter:"_setRotation"},texture:{value:null,setter:"_setTexture"},textureCoordinates:{value:[],validator:n.isArray},vertices:{value:[],validator:n.isArray},wireframe:{value:!1,setter:"_setWireframe",validator:n.isBoolean}}})},"0.1",{requires:["base-build","y3d-texture","y3d-matrix"]});
